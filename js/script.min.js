const popupOpenButton=document.querySelector(".contacts-button"),popup=document.querySelector(".popup"),popupCloseButton=popup.querySelector(".popup-close"),popupName=popup.querySelector(".user-name-input"),popupEmail=popup.querySelector(".user-email-input"),popupForm=popup.querySelector(".popup-form"),input=document.querySelector("input");input.oninput=function(){result.innerHTML=input.value};let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(p){isStorageSupport=!1}popupOpenButton.addEventListener("click",function(p){p.preventDefault(),popup.classList.add("popup-show"),popupName.focus(),storage?(popupName.value=storage,popupEmail.focus()):popupName.focus()}),popupCloseButton.addEventListener("click",function(p){p.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),popupForm.addEventListener("submit",function(p){popupName.value&&popupEmail.value?isStorageSupport&&localStorage.setItem("name",popupName.value):(p.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))}),window.addEventListener("keydown",function(p){27===p.keyCode&&popup.classList.contains("popup-show")&&(p.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error"))});